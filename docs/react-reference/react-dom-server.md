# React DOM Server APIs

The `react-dom/server` APIs let you render React components to HTML on the server. These APIs are only used on the server at the top level of your app to generate the initial HTML.

---

## Server APIs for Node.js Streams

### `renderToPipeableStream`

Renders a React tree to a pipeable Node.js Stream.

```jsx
import { renderToPipeableStream } from 'react-dom/server';

app.get('/', (req, res) => {
  const { pipe, abort } = renderToPipeableStream(<App />, {
    bootstrapScripts: ['/main.js'],
    onShellReady() {
      res.setHeader('content-type', 'text/html');
      pipe(res);
    },
    onError(error) {
      console.error(error);
    }
  });

  // Abort after timeout
  setTimeout(abort, 10000);
});
```

**Parameters:**
- `reactNode`: A React node you want to render to HTML.
- `options` (optional): Configuration options.

**Options:**
- `bootstrapScripts`: Array of script URLs to include as `<script>` tags.
- `bootstrapModules`: Array of module URLs to include as `<script type="module">`.
- `identifierPrefix`: Prefix for IDs generated by `useId`.
- `namespaceURI`: Namespace URI for the root element.
- `nonce`: Nonce for Content Security Policy.
- `onAllReady`: Callback when all rendering is complete.
- `onError`: Callback for server errors.
- `onShellReady`: Callback when the initial shell is ready.
- `onShellError`: Callback when shell rendering fails.
- `progressiveChunkSize`: Number of bytes in a chunk.

**Returns:**
- An object with `pipe` and `abort` methods.

---

## Server APIs for Web Streams

### `renderToReadableStream`

Renders a React tree to a Readable Web Stream.

```jsx
import { renderToReadableStream } from 'react-dom/server';

async function handler(request) {
  const stream = await renderToReadableStream(<App />, {
    bootstrapScripts: ['/main.js']
  });

  return new Response(stream, {
    headers: { 'content-type': 'text/html' }
  });
}
```

**Parameters:**
- `reactNode`: A React node you want to render to HTML.
- `options` (optional): Configuration options.

**Returns:**
- A Promise that resolves to a ReadableStream.

---

## Legacy APIs

### `renderToString`

Renders a React tree to an HTML string.

```jsx
import { renderToString } from 'react-dom/server';

const html = renderToString(<App />);
```

**Note:** This API has limited Suspense support. Prefer streaming APIs for new code.

### `renderToStaticMarkup`

Renders a non-interactive React tree to an HTML string.

```jsx
import { renderToStaticMarkup } from 'react-dom/server';

const html = renderToStaticMarkup(<Page />);
```

**Note:** Output cannot be hydrated. Useful for static pages.

---

## Streaming Patterns

### Progressive rendering with Suspense

```jsx
import { renderToPipeableStream } from 'react-dom/server';
import { Suspense } from 'react';

function App() {
  return (
    <html>
      <body>
        <Header />
        <Suspense fallback={<Spinner />}>
          <MainContent />
        </Suspense>
        <Footer />
      </body>
    </html>
  );
}

const { pipe } = renderToPipeableStream(<App />, {
  bootstrapScripts: ['/main.js'],
  onShellReady() {
    pipe(res);
  }
});
```

### Waiting for all content

```jsx
const { pipe } = renderToPipeableStream(<App />, {
  bootstrapScripts: ['/main.js'],
  onAllReady() {
    // Wait for everything, including Suspense boundaries
    pipe(res);
  }
});
```

---

*See also: [React DOM Client APIs](./react-dom-client.md) | [React DOM Static APIs](./react-dom-static.md)*
