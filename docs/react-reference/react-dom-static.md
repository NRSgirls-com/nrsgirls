# React DOM Static APIs

The `react-dom/static` APIs let you generate static HTML for React components. They have limited functionality compared to the streaming APIs.

---

## APIs

### `prerender`

Pre-renders a React tree to static HTML using a Web Stream.

```jsx
import { prerender } from 'react-dom/static';

async function generateStaticHTML() {
  const { prelude } = await prerender(<App />, {
    bootstrapScripts: ['/main.js']
  });

  return new Response(prelude, {
    headers: { 'content-type': 'text/html' }
  });
}
```

**Parameters:**
- `reactNode`: A React node you want to render to HTML.
- `options` (optional): Configuration options.

**Options:**
- `bootstrapScripts`: Array of script URLs to run on the client.
- `bootstrapModules`: Array of ESM module URLs.
- `identifierPrefix`: Prefix for IDs generated by `useId`.
- `namespaceURI`: Namespace URI (e.g., for SVG).
- `signal`: AbortSignal for canceling prerendering.
- `onError`: Callback for errors during rendering.

**Returns:**
- A Promise that resolves to an object containing `prelude` (a ReadableStream).

---

### `prerenderToNodeStream`

Pre-renders a React tree to static HTML using a Node.js Stream.

```jsx
import { prerenderToNodeStream } from 'react-dom/static';
import { Writable } from 'stream';

async function generateStaticHTML() {
  const { prelude } = await prerenderToNodeStream(<App />, {
    bootstrapScripts: ['/main.js']
  });

  return prelude;
}
```

**Parameters:**
- `reactNode`: A React node you want to render to HTML.
- `options` (optional): Configuration options.

**Returns:**
- A Promise that resolves to an object containing `prelude` (a Node.js Stream).

---

## Use Cases

### Static Site Generation (SSG)

```jsx
import { prerender } from 'react-dom/static';
import { writeFile } from 'fs/promises';

async function buildStaticPages() {
  const pages = [
    { path: '/', component: <HomePage /> },
    { path: '/about', component: <AboutPage /> },
    { path: '/contact', component: <ContactPage /> },
  ];

  for (const page of pages) {
    const { prelude } = await prerender(page.component);
    const html = await streamToString(prelude);
    await writeFile(`./dist${page.path}/index.html`, html);
  }
}
```

### Pre-rendering with data

```jsx
import { prerender } from 'react-dom/static';

async function prerenderWithData(userId) {
  // Fetch data before rendering
  const user = await fetchUser(userId);

  const { prelude } = await prerender(
    <UserProfile user={user} />
  );

  return prelude;
}
```

---

## Comparison with Streaming APIs

| Feature | Static APIs | Streaming APIs |
|---------|-------------|----------------|
| Suspense | Waits for all content | Streams progressively |
| Time to First Byte | Higher (waits for complete HTML) | Lower (sends shell immediately) |
| Use Case | Static site generation | Dynamic server rendering |
| Client Interactivity | After full HTML loads | Progressive enhancement |

---

## When to Use Static APIs

- **Static site generation (SSG)** - Pre-building HTML at build time.
- **Email templates** - Generating HTML for emails.
- **PDF generation** - Creating HTML for PDF conversion.
- **Caching** - Pre-rendering pages for CDN caching.

---

*See also: [React DOM Server APIs](./react-dom-server.md) | [React DOM Client APIs](./react-dom-client.md)*
